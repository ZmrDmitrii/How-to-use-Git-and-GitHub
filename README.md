# Git

## **Git и контроль версий**

**VSC** (Version Control System) - Система контроля версий

**Ревизия** (версия) ****- одно или несколько изменений:

- что изменилось
- кто внес изменения
- когда внесли изменения
- комментарии к изменению

Возможности git:

- совместная одновременная работа над проектом
- хранение истории изменений с возможностью отката к предыдущей версии

## Командная строка

**GUI** (Graphical User Interface) - графический интерфейс (кнопки, окна, меню с настройками)

**CLI** (Command-Line Interface) - командная строка (текстовый интерфейс, терминал / консоль)

### Команды

**pwd** - **p**rint **w**orking **d**irectory - узнать, в какой директории находимся

**ls** - **l**i**s**t directory contents - узнать содержимое директории

**cd** имя_папки ****- change directory - сменить директорию

- “имя папки” - если в названии папки есть пробел - используем кавычки
- .. - чтобы вернуться в родительскую директорию

**mkdir** имя_папки - **m**a**k**e **dir**ectory - создать директорию

**touch** имя_файла.расширение - создать файл

**mv** старое_имя_файла новое_имя_файла - переименовать файл

**mv** имя_файла имя_папки - переместить файл в папку

**rm** имя_файла - удалить файл

- удалить не в корзину - вернуть файл нельзя

**rmdir** имя_папки - удалить директорию

- удалить папку, в которой есть файлы - нельзя - защита от случайного удаления

**rm -r** имя_папки - удалить папку с файлами внутри

- -r ключ - позволяет удалять папку с файлами внутри

**echo** “текст” **>>** имя_файла.txt - записать текст в файл

- >> - символ перенаправления вывода - перемещает все, что выводится в командную строку, внутрь файла **в конец**
- > - **заменит** весь текст в файле на только что введенный
- может появиться ошибка: в консоли появляется надпись **dquote>** и не реагирует на команды - **Ctrl + C** - решает проблему

**cat** имя_файла - вывод содержимого файла в командную строку

## **Git: настройка и основы версионирования**

### Команды для настройки Git

git --version - проверит, установлен ли Git, если да - выдаст версию

git config --global - настройка Git

- user.name “имя” - установка имени для Git
- user.email эл_почта - установка почты для Git

git config --list - проверка свойств настроек (в т.ч. имя и почта)

### Создание, удаление, проверка состояния репозитория

**Репозиторий** - хранилище; место, где хранятся все изменения в проекте

% **git init**  - превращает папку в **локальный** **git** **репозиторий** для проекта

Внутри папки проекта появилась новая папка **.git**

% **ls .git** - посмотреть содержимое папки .git

- HEAD - **текстовый** файл с указанием, куда ведет ссылка HEAD
    - сat .git/head - посмотреть содержимое этого файла
- config - **текстовый** файл с настройками репозитория
- description - **текстовый** файл с описанием репозитория
- hooks - **папка** с хуками Git
    - хуки - скрипты, которые можно выполнять перед различными действиями с Git
- info - **папка** с доп информацией о репозитории
    - внутри файл exclude - можно задавать путь до файлов и папок, которые игнорируются Git (пользуемся другим способом - .gitignore)
- objects - **папка** с объектами Git - отображаются внесенные изменения
- refs - **папка** с ссылками (внутри ветки и прочие ссылки)

% **rm -rf .git** - “**разгитить**” папку

- -r - удалить папку с содержимым
- -f - force - точно удалить папку с содержимым

% **git status** - посмотреть текущее **состояние** репозитория

### Подготовка файла к сохранению

сначала необходимо создать файлы (**touch**)

![Image 4.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/1d372381-f3a2-40b1-aa10-643c91ea12f2/9b13526e-67d4-4769-960d-2d463a5e997f/508be540-3d0d-4446-9b30-25a7b747d4e9.png)

% **git add** имя_файла - создания файла для сохранения в новой версии

- файл выведен зеленым цветом - git готов сохранить изменения

![Image 3.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/1d372381-f3a2-40b1-aa10-643c91ea12f2/0a3494b4-0b74-44e1-bc68-c33a648cb412/213201d2-b4f4-4c96-983a-9893b92c9b3f.png)

% **git add --all** - подготовить все созданные файлы к сохранению одновременно

% **git add .** - добавить все файлы в текущей папке

- **.** - текущая папка (в которой находимся прямо сейчас)

Пример:

- git add - добавить товары в корзину
- commit - оплатить товар

Если внести изменения в добавленный файл - статус: modified. Изменения необходимо либо добавить, либо отменить

- git add имя_файла - добавить изменения
- git restore имя_файла - удалить изменения

### Коммит файла (сохранение)

“Сделать коммит” - сохранить текущую версию файлов

% **git commit -m** “название” - создание коммита с названием

- в названии коммита принято указывать выполненные изменения: кратко, понятно, на английском языке

Если забыл написать название - откроется **редактор vim**

- **:q!** - выйти

## GitHub. SSH-ключ

**GitHub** - хостинг для командных проектов

**Хостинг** - сервис по размещению контента в интернете

**SHH** (Secure Shell) - протокол, обеспечивает безопасное зашифрованное соединение между двумя устройствами через небезопасную сеть; используется для безопасной передачи файлов

**SHH-ключ** - специальный файл; необходим, чтобы установить безопасное соединение с другим компьютером через интернет без ввода пароля; состоит из 2х частей:

- **Личный ключ** - находится у меня (хранить в секрете)
- **Публичный ключ** - добавляется туда, куда мы хотим безопасно подключиться

**Генерация SSH-ключа**

Подробно описано в уроке Яндекс.Практикум 3/22: 3 - 2/6 - 4/6

## Удаленные репозитории

% git init - создает **локальный репозиторий**

**Удаленный репозиторий** - опубликованный в GitHub репозиторий; хранится в облаке, доступ из любой точки

+ → New repository → **Initialize this repository with**:

- **README.md** - текстовый файл; содержится информация о проекте
    - внутри инструкции по запуску проекта, статусы его развития и кратко описывать, как получить пользу от работы с кодом
    - оформлять специальным языком разметки – Markdown
- **.gitignore** - служебный текстовый файл
    - внутри список файлов и правил для Git, которые будут проигнорированы при отслеживании
- **License** - указывает на условия использования, распространения и модификации кода (защищает права автора)

Варианты подключения репозитория:

- Создать локальный репозиторий
    - завести файл README командой **echo**
    - разместить рядом с ним репозиторий **git init**
- Пушнуть существующий репозиторий
    - сменить протокол подключения с HTTP на SSH
    - выполнить команды, которые предлагает GitHub
- Импортировать код из другой VSC или хостинга

% **git push** - опубликовать изменения в удаленном репозитории

### **Клонирование репозитория**

Можно клонировать репозиторий на другой компьютер или добавить пользователей для совместной работы

% **git clone** - клонирует репозиторий (появляется папка - в ней копия)

Копирование проекта:

- GitHub - Code - Copy SSH адрес
- Terminal - % git clone адрес новое_имя

% **git pull** - достать изменения из удаленного репозитория

- обязательно **commit** перед git pull
- если есть конфликты между локальными файлами и файлами на удаленном репозитория - git попросит разрешить конфликты с файлами

## Ветки и Pull Request

Ветки позволяют работать над проектом не мешая другим участникам

**Ветка** в Git — отдельный поток разработки. В таком потоке можно безопасно пробовать новые идеи и вносить изменения не влияя на основной код проекта.

Прежде чем писать новую функциональность - для нее нужно создать отдельную ветку

Основная, стабильная версия хранится в ветке main (master)

% **git branch** - просмотр веток проекта

- ***** название_ветки - ветка, в которой мы находимся

Коммиты объединяются в последовательность - коммит за коммитом - ветка

% **git branch** название_ветки - создать новую ветку

![Image-17.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/1d372381-f3a2-40b1-aa10-643c91ea12f2/e10b58e5-cc37-4f2d-a876-f2eb3f76e83e/b3564eca-2bd6-416e-a35f-a45961440ed4.png)

% **git checkout** название_ветки - переключиться между ветками

% **git checkout -b** название_ветки - создать ветку и сразу переключиться на нее

- -b - branch

**Merge** (слияние веток) - процесс добавления функциональности из доп. ветки в основную.

- перейти в ветку, в которую добавляем функциональность из другой ветки
- git merge название_добавляемой_ветки

% **git merge** название_добавляемой_ветки - произвести слияние ветки с той, в которой находимся

![Image-18.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/1d372381-f3a2-40b1-aa10-643c91ea12f2/2fb583d0-52a3-43ec-b4d8-35aab4b474e2/Image-18.png)

% **git push -u origin** название_ветки - отправить ветку в удаленный репозиторий GitHub

Процесс добавления функциональности при командной работе:

1. создаем функциональность в своей ветке
2. создаем **pull-request** - запрос на подтягивание 
3. коллеги проводят **code review** - проверку кода на аккуратность, логику, корректность
4. **merge** своей ветки с main

У каждого **pull-request** есть:

- **Название** - **краткое** описание изменений
- **Описание** - **развернутое** описание изменений
- **Исходная ветка** - та, в которой работали (**своя**)
- **Целевая ветка** - та, в которую **хотим** внести изменения

У каждого pull-request 2 исхода:

- **Merge** - соединить
- **Close** - закрыть

Создаем pull-request:

1.  кнопка pull-request вверху GitHub
2. base: Ветка, в которую добавить изменения; compare: Ветка, из которой взять изменения
3. Create Pull-Request
4. Заполнить Название, Описание

Вкладки в pull-request:

- **Files Changed** - измененные файлы - коллеги могут оставить свои коментарии
- **Conversations** - обсудить изменения

Если нужно что-то исправить - можно добавить коммиты в ветку - они попадут в открытый pull-request после push
